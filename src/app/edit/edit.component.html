<form *ngIf="testForm"
[formGroup]="testForm" (ngSubmit)="save()"> <!--*ngIf="testForm$ | async as form"  -->
<!-- Name and Subject-->
    <div class="underlined-flex">
        <input formControlName="caption" class="underlined-input text-xl font-semibold" type="text" placeholder="Test Name">
    </div>
    <div class="underlined-flex">
        <input formControlName="subject" class="underlined-input text-xl font-semibold" type="text" placeholder="Test Subject">
    </div>
    <input formControlName="icon" type="hidden">
    <input formControlName="open" type="hidden">
<!--Questions-->
    <div formArrayName="questions">
        <div *ngFor="let question of questions?.controls; let qIdx = index"
            [formGroupName]="qIdx" >
            {{ qIdx }}
            <input type="hidden" formControlName="id"> <!--ShADY thing to do.. -->
            <div class="underlined-flex">
                <input formControlName="caption" class="underlined-input text-xl font-semibold" type="text" placeholder="Q Name">
            </div>
            <mat-slide-toggle formControlName="required" class="font-sans">Required</mat-slide-toggle>

            <!-- Answers --> <!-- form array, within it -form group, within it - form control! -->
            <div formArrayName="answers">
                <div *ngFor="let answer of getAnswers(qIdx).controls; let ansIdx = index"
                [formGroupName]="ansIdx">
                {{ansIdx}}
                    <div>
                        <input formControlName="right" checked="right" type="checkbox">
                    </div>
                    <div class="underlined-flex">
                        <input formControlName="text" class="underlined-input text-sm font-normal" type="text" placeholder="ans text">
                    </div>
                    <button (click)="removeAnswer(qIdx, ansIdx)" class="">Remove Answer</button>
                </div>
            </div>
            <button (click)="addAnswer(qIdx)" class="underline-yellow">Add Option+</button>
            <br>
            <!-- <div class="underlined-flex">
                <input formControlName="answerText" class="underlined-input text-xl font-semibold" type="text" placeholder="Q Name">
            </div> -->
            <button (click)="removeQuestion(qIdx)" class="button-yellow">Delete question</button>
        </div>
    </div>
    <button (click)="addQuestion()" class="underline-yellow">Add Question+</button>
    <br>
    <button type="submit" [disabled]="!testForm.valid" class="button-yellow">Save</button>
</form>
    